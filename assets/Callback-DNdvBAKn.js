import{d as N,r as y,c as o,u as r,o as s,w as i,e as l,t as n,f as a,b as g,a as C,N as k,a1 as w,g as P,_ as x}from"./app-Ddffynhy.js";import{N as m}from"./Alert-DnTXmKbJ.js";import{N as V}from"./Input-B1svLVVL.js";const h="iYCeC9g08h5vuP9UqvPHKKSVrKFXGa1v",B="jXiFMOPVPCWlO2M5CwWQzffpNPaGTRBG",S="https://alist.example.com/tool/baidu/callback",T=N({__name:"Callback",setup(z){const c=new URL(window.location.href),u=c.searchParams.get("code"),p=c.searchParams.get("error"),v=c.searchParams.get("error_description"),t=y();return u&&!p&&(async()=>{const e=await(await fetch(`${P()}/alist/baidu/get_refresh_token?code=${u}`)).json();t.value=e})(),(b,e)=>!r(u)||r(p)?(s(),o(r(m),{key:0,title:r(p)||"Error",type:"error"},{default:i(()=>[l(n(r(v)),1)]),_:1},8,["title"])):(s(),o(r(k),{key:1,vertical:"",size:"large"},{default:i(()=>{var d,_,f;return[a("p",null,[e[0]||(e[0]=a("b",null,"client_id: ",-1)),l(n(h))]),a("p",null,[e[1]||(e[1]=a("b",null,"client_secret: ",-1)),l(n(B))]),a("p",null,[e[2]||(e[2]=a("b",null,"redirect_uri: ",-1)),l(n(S))]),(d=t.value)!=null&&d.error||(_=t.value)!=null&&_.error_description?(s(),o(r(m),{key:0,title:(f=t.value)==null?void 0:f.error,type:"error"},{default:i(()=>[l(n(t.value.error_description),1)]),_:1},8,["title"])):g("",!0),C(r(k),{vertical:""},{default:i(()=>[e[3]||(e[3]=a("b",null,"refresh_token:",-1)),t.value?(s(),o(r(V),{key:1,type:"textarea",autosize:"",readonly:"",value:t.value.refresh_token},null,8,["value"])):(s(),o(r(w),{key:0}))]),_:1,__:[3]})]}),_:1}))}}),I=x(T,[["__scopeId","data-v-f3b88058"]]);export{I as C};
