import{_ as k,a as u,b as m}from"./ref_token-CWhitbal.js";import{_ as c,j as b,m as a,f as s,a as n,e as l,w as e,l as t,o as A}from"./app-Ddffynhy.js";const y={},f={id:"引用",tabindex:"-1"},v={class:"header-anchor",href:"#引用"};function C(x,i){const d=t("Badge"),h=t("RouteLink"),p=t("Mermaid"),g=t("Tabs");return A(),b("div",null,[i[13]||(i[13]=a('<h1 id="通用项" tabindex="-1"><a class="header-anchor" href="#通用项"><span>通用项</span></a></h1><h2 id="挂载路径" tabindex="-1"><a class="header-anchor" href="#挂载路径"><span><strong>挂载路径</strong></span></a></h2><p>唯一标识，对外展示的名称，要挂载到的位置，如果要挂载到根目录，就是 <code>/</code></p><p><img src="'+k+'" alt="" data-mode="lightmode-only" loading="lazy"></p><p><img src="'+u+'" alt="" data-mode="darkmode-only" loading="lazy"></p><p>挂载路径名称重复使用</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Failed create storage in database: UNIQUE constraint failed: x_storages.mount_path</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>挂载路径名称没有填写</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Key: &#39;Storage.MountPath&#39; Error:Field validation for &#39;MountPath&#39; failed on the &#39;required&#39; tag</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><br><h2 id="序号" tabindex="-1"><a class="header-anchor" href="#序号"><span><strong>序号</strong></span></a></h2><p>当有多个账户时，用于排序，越小越靠前，可以填写负数</p><br><h2 id="备注" tabindex="-1"><a class="header-anchor" href="#备注"><span><strong>备注</strong></span></a></h2><p>随便你想填什么，只是提醒你这个存储是什么</p>',15)),s("h3",f,[s("a",v,[s("span",null,[i[0]||(i[0]=s("strong",null,"引用",-1)),i[1]||(i[1]=l()),n(d,{text:"≥ 3.42.0",type:"info",vertical:"middle"})])])]),i[14]||(i[14]=a('<p>从 <code>已挂载的存储</code> 中引用认证、令牌等，同一个Token多个网盘使用</p><p>目前仅支持如下网盘：</p><ul><li>中国移动云盘</li><li>阿里云盘Open</li><li>天翼云盘客户端</li><li>123云盘分享（引用123云盘）</li><li>Cloudreve V3 / V4</li></ul><p>在存储设置中将<code>备注(Remark)</code>的第一行设置为：<strong>ref:/挂载路径</strong></p><ul><li><a href="https://github.com/AlistGo/alist/pull/7805" target="_blank" rel="noopener noreferrer">https://github.com/AlistGo/alist/pull/7805</a></li></ul><p><img src="'+m+'" alt="" loading="lazy"></p><br><h2 id="启用签名" tabindex="-1"><a class="header-anchor" href="#启用签名"><span><strong>启用签名</strong></span></a></h2><p>对文件进行签名加密(不会需要密码)，仅对本驱动生效，如果别的没启用签名也没设置<code>签名全部</code>和<code>元信息加密</code>其他的不会进行签名</p><p>使用场景：不想开启全部签名，也不想设置元信息加密，只想对某驱动进行签名加密防止被扫</p><p>影响范围：<code>设置--&gt;全局--&gt;签名所有</code> &gt; <code>元信息目录加密</code> &gt; <code>单驱动签名</code></p><br><h2 id="禁用索引" tabindex="-1"><a class="header-anchor" href="#禁用索引"><span><strong>禁用索引</strong></span></a></h2><p>允许用户禁用存储索引。</p><ul><li>例如索引选项中的<code>忽略索引</code>，启用<code>禁用索引</code>后不需要再去配置了，这样也更方便一些</li></ul><p><a href="https://github.com/AlistGo/alist/pull/7730" target="_blank" rel="noopener noreferrer">alist#7730</a>、<a href="https://github.com/AlistGo/alist-web/pull/219" target="_blank" rel="noopener noreferrer">alist-web#219</a></p><br><h2 id="缓存过期" tabindex="-1"><a class="header-anchor" href="#缓存过期"><span><strong>缓存过期</strong></span></a></h2><p>目录结构的缓存时间。</p><br><h2 id="web-代理" tabindex="-1"><a class="header-anchor" href="#web-代理"><span><strong>Web 代理</strong></span></a></h2>',21)),s("p",null,[i[3]||(i[3]=l("网页预览、下载和直接链接是否通过中转。如果你打开此项，建议你设置")),n(h,{to:"/zh/config/configuration.html#site_url"},{default:e(()=>i[2]||(i[2]=[l("site_url")])),_:1,__:[2]}),i[4]||(i[4]=l("，以帮助alist更好的工作。"))]),i[15]||(i[15]=a('<hr><ul><li>Web代理：是使用网页时候的策略，默认为本地代理，如果填写了代理URL并且启用了Web代理使用的是代理URL</li><li>WebDAV策略：是在使用WebDAV功能时候的选项， <ul><li>如果有302选项默认为302，如果没有302选项默认为本地代理，如果要使用代理URL请填写并且手动切换到代理URL策略</li></ul></li></ul><p>两者是不同的配置</p><br><h2 id="webdav-策略" tabindex="-1"><a class="header-anchor" href="#webdav-策略"><span><strong>WebDAV 策略</strong></span></a></h2><ul><li>302 重定向：重定向到真实链接</li><li>使用代理 URL：重定向到代理 URL</li><li>本机代理：直接通过本地中转返回数据（最佳兼容性）</li></ul><hr><ul><li>302重定向：虽然不会消耗流量，但是不建议共享使用，有封禁账户的风险</li><li>代理URL：会消耗搭建代理URL的流量</li><li>本地代理：会消耗搭建OpenList设备的流量</li></ul><h3 id="三种模式说明" tabindex="-1"><a class="header-anchor" href="#三种模式说明"><span><strong>三种模式说明</strong></span></a></h3>',9)),n(p,{id:"mermaid-195",code:"eJyFUV1LAkEUfXZ/xT4atBT1FiXYx0MgFEFP0UNFUSAVJvTQBtuXWaYpWZYKGpoGfqQotrlu/Zjmzu7+i+46qyhYDQzcOXPumXPuCILAeXe87s0Jfnx0zLgMQjkO4ci3dEKUjBb2LXvcWNNkEZIVhnBmy5Z773Bje83j5V1LnG3OrkVfqf+d3gWJmlzY39x17Rx49coZws7FeX5y3TPi4PV8Dm4jWkKGixqijEyaiDxaDHagoRcabYC/AhGVKFloSZAP0Ku8/nwzxNmcK3ZGG1rlbNN2oqYRnFmx3C65EJ096vV7jP6mphxO3HMcj8usRC1Rx3eIEmJipJXWlCcUI3LJiNVpLE0Uhaj3NJjSpZhlDwekn6lEDuiqCtk4fBWgUqXJK1aL00xdEBwiE4ULPwY2pBNTuuNPnDEJ4Atq0WoX1NWiOZq2g860eiAIh4bb3syXtfi5IaWgmbOIcPsAvhpphrofZpxmiCxphTciX7MejGfpdZr/dkvDJVCanY/EJr38CdlLcdako/Ff7v+JQT4CfUkGx+jX7snSDn/eQAkz16BE3A/MMJ2G"}),i[16]||(i[16]=s("br",null,null,-1)),i[17]||(i[17]=s("h2",{id:"下载代理-url",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#下载代理-url"},[s("span",null,[s("strong",null,"下载代理 URL")])])],-1)),i[18]||(i[18]=s("p",null,"开启代理时不填写此字段，默认使用本机进行传输。提供了下面两种代理方式：",-1)),n(g,{id:"203",data:[{id:"cloudflare workers"},{id:"通用二进制"}]},{title0:e(({value:r,isActive:o})=>i[5]||(i[5]=[l("cloudflare workers")])),title1:e(({value:r,isActive:o})=>i[6]||(i[6]=[l("通用二进制")])),tab0:e(({value:r,isActive:o})=>i[7]||(i[7]=[s("p",null,"可以使用 Cloudflare Workers 做代理，这里填写 Workers 地址即可。",-1),s("p",null,[l("Workers 代码可以在 "),s("a",{href:"https://github.com/OpenListTeam/alist-proxy/blob/main/alist-proxy.js",target:"_blank",rel:"noopener noreferrer"},"https://github.com/OpenListTeam/alist-proxy/blob/main/alist-proxy.js"),l(" 找到，实际使用时需要替换其中的这两个变量：")],-1),s("ul",null,[s("li",null,[l("ADDRESS: 你的 OpenList 地址，必须加上协议头，后面不能跟 "),s("code",null,"/"),l("。如 "),s("code",null,"https://pan.example.com"),l("；")]),s("li",null,"TOKEN: 在 OpenList 管理页面中进入“其他设置”得到；"),s("li",null,[l("WORKER_ADDRESS: 你的 Worker 地址，通常与 "),s("strong",null,"下载代理URL"),l(" 相同。")])],-1),s("p",null,[l("⚠️ Cloudflare Workers 免费CDN支持兼容(不论国内还是国外)的只有 "),s("strong",null,"http80端口"),l(" 和 "),s("strong",null,"https443端口"),l("，来自群友测试")],-1),s("ul",null,[s("li",null,[l("在Alist后台挂载配置时 填写 "),s("strong",null,"下载代理URL"),l(" 时候的 链接结尾 不可以带 "),s("code",null,"/")])],-1),s("p",null,[l("若看不懂"),s("a",{href:"https://anwen-anyi.github.io/index/11-durl.html",target:"_blank",rel:"noopener noreferrer"},[s("strong",null,"有拆解详细")]),l("的教程")],-1),s("p",null,null,-1)])),tab1:e(({value:r,isActive:o})=>i[8]||(i[8]=[s("p",null,[l("也可以使用另一台机器进行代理，在 "),s("a",{href:"https://github.com/alist-org/alist-proxy/releases",target:"_blank",rel:"noopener noreferrer"},"https://github.com/alist-org/alist-proxy/releases"),l(" 下载程序并通过 "),s("code",null,"./alist-proxy -help"),l(" 查看使用方法。")],-1),s("p",null,[l("如果不懂有详细"),s("a",{href:"https://www.bilibili.com/video/BV17N411S7fg/",target:"_blank",rel:"noopener noreferrer"},[s("strong",null,"视频教程")])],-1)])),_:1}),i[19]||(i[19]=a('<p>你甚至可以开发自己的代理程序，一般步骤是：</p><ul><li>下载时会请求 <code>PROXY_URL/path?sign=sign_value</code></li><li>在代理程序中验证 sign，sign 的计算方法为：</li></ul><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> to_sign</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">path</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">expireTimeStamp</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> _sign</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> safeBase64</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hmac_sha256</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">to_sign</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">TOKEN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> sign</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_sign</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">expireTimeStamp</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',3)),s("p",null,[i[10]||(i[10]=s("code",null,"TOKEN",-1)),i[11]||(i[11]=l("即管理员账户的")),n(h,{to:"/zh/config/other.html#token"},{default:e(()=>i[9]||(i[9]=[l("token")])),_:1,__:[9]}),i[12]||(i[12]=l("."))]),i[20]||(i[20]=a('<ul><li>验证签名正确后，请求 <code>HOST/api/fs/link</code>，可以得到文件的 URL 和要携带的请求头</li><li>使用信息请求和返回</li></ul><br><h2 id="排序相关" tabindex="-1"><a class="header-anchor" href="#排序相关"><span><strong>排序相关</strong></span></a></h2><ul><li>排序方式：按什么排序</li><li>排序方向：排序方向是升序还是降序</li></ul><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>有些驱动器使用自己的排序方法，可能会有所不同。</p></div><br><h2 id="提取文件夹" tabindex="-1"><a class="header-anchor" href="#提取文件夹"><span><strong>提取文件夹</strong></span></a></h2><ul><li>提取到前面：排序时将所有文件夹放在前面</li><li>提取到后面：排序时将所有文件夹放在后面</li></ul>',8))])}const F=c(y,[["render",C]]),E=JSON.parse('{"path":"/zh/guide/drivers/common.html","title":"通用项","lang":"zh-CN","frontmatter":{"icon":"iconfont icon-state","order":1,"category":["Guide"],"tag":["Storage","Guide"],"sticky":true,"star":true},"headers":[{"level":2,"title":"挂载路径","slug":"挂载路径","link":"#挂载路径","children":[]},{"level":2,"title":"序号","slug":"序号","link":"#序号","children":[]},{"level":2,"title":"备注","slug":"备注","link":"#备注","children":[{"level":3,"title":"引用","slug":"引用","link":"#引用","children":[]}]},{"level":2,"title":"启用签名","slug":"启用签名","link":"#启用签名","children":[]},{"level":2,"title":"禁用索引","slug":"禁用索引","link":"#禁用索引","children":[]},{"level":2,"title":"缓存过期","slug":"缓存过期","link":"#缓存过期","children":[]},{"level":2,"title":"Web 代理","slug":"web-代理","link":"#web-代理","children":[]},{"level":2,"title":"WebDAV 策略","slug":"webdav-策略","link":"#webdav-策略","children":[{"level":3,"title":"三种模式说明","slug":"三种模式说明","link":"#三种模式说明","children":[]}]},{"level":2,"title":"下载代理 URL","slug":"下载代理-url","link":"#下载代理-url","children":[]},{"level":2,"title":"排序相关","slug":"排序相关","link":"#排序相关","children":[]},{"level":2,"title":"提取文件夹","slug":"提取文件夹","link":"#提取文件夹","children":[]}],"git":{"createdTime":1662881160000,"updatedTime":1749716087000,"contributors":[{"name":"Noah Hsu","username":"Noah Hsu","email":"i@nn.ci","commits":9,"url":"https://github.com/Noah Hsu"},{"name":"Chi_Tang","username":"Chi_Tang","email":"chitang@duck.com","commits":1,"url":"https://github.com/Chi_Tang"},{"name":"安稳","username":"安稳","email":"56105412+anwen-anyi@users.noreply.github.com","commits":9,"url":"https://github.com/安稳"},{"name":"Andy Hsu","username":"Andy Hsu","email":"i@nn.ci","commits":2,"url":"https://github.com/Andy Hsu"},{"name":"安稳","username":"安稳","email":"anwen_anyi@foxmail.com","commits":4,"url":"https://github.com/安稳"},{"name":"sigvoid","username":"sigvoid","email":"easlandll@gmail.com","commits":1,"url":"https://github.com/sigvoid"},{"name":"MadDogOwner","username":"MadDogOwner","email":"xiaoran@xrgzs.top","commits":1,"url":"https://github.com/MadDogOwner"},{"name":"Hantong Chen","username":"Hantong Chen","email":"cxwdyx620@gmail.com","commits":2,"url":"https://github.com/Hantong Chen"}]},"readingTime":{"minutes":4.76,"words":1427},"filePathRelative":"zh/guide/drivers/common.md","localizedDate":"2022年9月11日"}');export{F as comp,E as data};
