import{d as x,r as g,c as n,u as e,o as s,w as p,e as l,t as c,f as a,b as w,a as h,N as b,a1 as C,_ as P}from"./app-Bl4GcpgC.js";import{N as k}from"./Alert-Bmdr8kSD.js";import{N as S}from"./Input-INisigsE.js";const y="a78d5a69054042fa936f6c77f9a0ae8b",v="9c119bbb04b346d2a52aa64401936b2b",T="https://alist.example.com/tool/yandex/callback",V=x({__name:"Callback",setup(z){const d=new URL(window.location.href),u=d.searchParams.get("code"),_=d.searchParams.get("error"),N=d.searchParams.get("error_description"),r=g();return u&&!_&&(async()=>{const o=new URLSearchParams;o.append("grant_type","authorization_code"),o.append("client_id",y),o.append("client_secret",v),o.append("code",u||"");const i=await(await fetch("https://oauth.yandex.com/token",{method:"POST",body:o})).json();r.value=i})(),(o,t)=>!e(u)||e(_)?(s(),n(e(k),{key:0,title:e(_)||"Error",type:"error"},{default:p(()=>[l(c(e(N)),1)]),_:1},8,["title"])):(s(),n(e(b),{key:1,vertical:"",size:"large"},{default:p(()=>{var i,f,m;return[a("p",null,[t[0]||(t[0]=a("b",null,"client_id: ",-1)),l(c(y))]),a("p",null,[t[1]||(t[1]=a("b",null,"client_secret: ",-1)),l(c(v))]),a("p",null,[t[2]||(t[2]=a("b",null,"redirect_uri: ",-1)),l(c(T))]),(i=r.value)!=null&&i.error||(f=r.value)!=null&&f.error_description?(s(),n(e(k),{key:0,title:(m=r.value)==null?void 0:m.error,type:"error"},{default:p(()=>[l(c(r.value.error_description),1)]),_:1},8,["title"])):w("",!0),h(e(b),{vertical:""},{default:p(()=>[t[3]||(t[3]=a("b",null,"refresh_token:",-1)),r.value?(s(),n(e(S),{key:1,type:"textarea",autosize:"",readonly:"",value:r.value.refresh_token},null,8,["value"])):(s(),n(e(C),{key:0}))]),_:1,__:[3]})]}),_:1}))}}),U=P(V,[["__scopeId","data-v-57fa4a0f"]]);export{U as C};
