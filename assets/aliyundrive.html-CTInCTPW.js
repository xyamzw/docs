import{d as C,r as a,j as T,f as t,m as p,Q as f,a as u,e as i,w as g,t as b,R as v,l as y,g as h,o as z}from"./app-Ddffynhy.js";import{_ as O}from"./aliyundrive-CF7jp5n4.js";const D={class:"hint-container warning"},N=["disabled"],R={style:{margin:"4px"}},P=["src"],U={class:"hint-container info"},W={class:"hint-container-title"},H=C({__name:"aliyundrive.html",setup(I){const o=a("Get Token"),n=a(0),l=a(""),s=a(""),c=a(""),w=async()=>{o.value="Waiting...",n.value=1;const e=await(await fetch(`${h()}/alist/ali/qr`)).json();console.log(e),o.value="Use AliyunDrive APP To Scan Then Click this Button again",n.value=2,c.value=JSON.stringify({ck:e.content.data.ck,t:e.content.data.t.toString()}),l.value=`${h()}/qr/?size=400&text=${encodeURIComponent(e.content.data.codeContent)}`},k=async()=>{n.value=3,o.value="Waiting...";const e=await(await fetch(`${h()}/alist/ali/ck`,{method:"POST",headers:{"Content-Type":"application/json"},body:c.value})).json(),{content:{data:{qrCodeStatus:r,loginResult:d,bizExt:S}}}=e;if(d!=="success"){n.value=2,o.value="Use AliyunDrive APP To Scan Then Click",alert("Status:"+r);return}const A=JSON.parse(atob(S));s.value=A.pds_login_result.refreshToken,o.value="Get Token Success",n.value=4,console.log(e)},x=async()=>{n.value===0&&w(),n.value===2&&k()};return(m,e)=>{const r=y("RouteLink"),d=y("Mermaid");return z(),T("div",null,[e[11]||(e[11]=t("h1",{id:"aliyundrive-share",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#aliyundrive-share"},[t("span",null,"Aliyundrive / Share")])],-1)),t("div",D,[e[5]||(e[5]=t("p",{class:"hint-container-title"},"Warning",-1)),t("p",null,[e[1]||(e[1]=i("This driver is not recommended for use, because it is not stable and may be blocked at any time and we will remove it in a future version.")),e[2]||(e[2]=t("br",null,null,-1)),e[3]||(e[3]=i(" We recommend using the official driver ")),u(r,{to:"/guide/drivers/aliyundrive_open.html"},{default:g(()=>e[0]||(e[0]=[i("Aliyundrive Open")])),_:1,__:[0]}),e[4]||(e[4]=i("."))])]),e[12]||(e[12]=p('<div class="hint-container tip"><p class="hint-container-title">Tips</p><p>Due to the limitation of the referrer of Aliyundrive, the mobile token must be used. Using the desktop web token will result in failure to download and preview.<br> Of course, you can also turn on the proxy so that <code>refresh token</code> of desktop web can work if you use it locally or if the bandwidth is large enough.</p></div><h3 id="refresh-token" tabindex="-1"><a class="header-anchor" href="#refresh-token"><span><strong>Refresh token</strong></span></a></h3><p>Follow to this <a href="https://github.com/Xhofe/alist/issues/88" target="_blank" rel="noopener noreferrer">issue</a> Capture/find the log on the mobile phone (<code>/data/media/0/Android/data/com.alicloud.databox/files/logs/trace/</code>). Or you can click:</p>',3)),t("p",null,[t("button",{disabled:n.value===3||n.value===1,style:{outline:"none",padding:"12px",background:"#70c6be",border:"none","border-radius":"8px",cursor:"pointer","font-size":"20px"},onClick:x},[e[6]||(e[6]=t("br",null,null,-1)),i(" "+b(o.value),1),e[7]||(e[7]=t("br",null,null,-1))],8,N)]),f(t("div",R,[t("img",{src:l.value},null,8,P)],512),[[v,l.value]]),f(t("div",null,[t("div",U,[t("p",W,"Token: "+b(s.value),1)])],512),[[v,s.value]]),e[13]||(e[13]=p('<p><em>API is hosted on <a href="http://replit.com" target="_blank" rel="noopener noreferrer">replit.com</a></em></p><h3 id="root-folder-file-id" tabindex="-1"><a class="header-anchor" href="#root-folder-file-id"><span><strong>Root folder file_id</strong></span></a></h3><p>Open the official website of Aliyundrive and click the string behind the url when you click into the folder you want to set, such as <a href="https://www.alipan.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940" target="_blank" rel="noopener noreferrer">https://www.alipan.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940</a>, which is <code>5fe01e1830601baf774e4827a9fb8fb2b5bf7940</code>:</p><p><img src="'+O+'" alt="file_id" loading="lazy"></p><h3 id="second-pass" tabindex="-1"><a class="header-anchor" href="#second-pass"><span><strong>Second pass</strong></span></a></h3><p>Check the hash when uploading. If there is one in the cloud, directly generate the file without consuming traffic</p><h3 id="internal-upload" tabindex="-1"><a class="header-anchor" href="#internal-upload"><span><strong>Internal upload</strong></span></a></h3><p>If the server you deploy Alist on is Aliyun ECS for Beijing area, turn on this switch to improve the upload speed. Do not turn on this switch for servers that do not meet the requirements, otherwise you will have problems with inability to upload.</p><br><h2 id="aliyundrive-share-url" tabindex="-1"><a class="header-anchor" href="#aliyundrive-share-url"><span><strong>Aliyundrive Share Url</strong></span></a></h2>',10)),t("p",null,[e[9]||(e[9]=i("It is no longer available, and the shared storage method will no longer be developed and maintained in the future. At the same time, the token obtained by ")),u(r,{to:"/guide/drivers/aliyundrive_open.html"},{default:g(()=>e[8]||(e[8]=[t("strong",null,"AliyundriveOpen",-1)])),_:1,__:[8]}),e[10]||(e[10]=i(" cannot be used in the Alibaba Cloud Disk shared mount storage."))]),e[14]||(e[14]=t("br",null,null,-1)),e[15]||(e[15]=t("h3",{id:"the-default-download-method-used",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#the-default-download-method-used"},[t("span",null,[t("strong",null,"The default download method used")])])],-1)),u(d,{id:"mermaid-63",code:"eJydkE1vwjAMhu/8CguutKztAC3SNmniuNO0aYeKQz6cJSJtuiSlVOLHr7QFscMkNF8S2+/zynYURZOgg0ECn0pzBcI2pbFUQIFBWQHaQ+1RAGtBoKS1Cc+TEySNbbiiLsD7ywS68KE1CDQBqY0hM8bk3Adnd0hmcrUa/1GjRVAkrQ5zbo11XU/KazwdcSnXy/Xy4pBl2W+H++owYDX7crRSoAUmkMO2r9Kkf7AUY5pnd+mWEOJtgdxQ7x+7OI4LHWmadzs6wO9aVwWWYXDphRuUcKHOwz2sBkGSG8upgcrZQ7uNYmoCupIGvcc4evrDliX55nzkHoSPt9dbYW40352uPI3jhXCd1vkFt0Vhy1iFwswaZILuo8p2wnZ6xbB/MPxm5gdtZr9x"})])}}}),Q=JSON.parse('{"path":"/guide/drivers/aliyundrive.html","title":"Aliyundrive / Share","lang":"en-US","frontmatter":{"icon":"iconfont icon-state","order":16,"category":["Guide"],"tag":["Storage","Guide","302"],"sticky":true,"star":true},"headers":[{"level":3,"title":"Refresh token","slug":"refresh-token","link":"#refresh-token","children":[]},{"level":3,"title":"Root folder file_id","slug":"root-folder-file-id","link":"#root-folder-file-id","children":[]},{"level":3,"title":"Second pass","slug":"second-pass","link":"#second-pass","children":[]},{"level":3,"title":"Internal upload","slug":"internal-upload","link":"#internal-upload","children":[]},{"level":2,"title":"Aliyundrive Share Url","slug":"aliyundrive-share-url","link":"#aliyundrive-share-url","children":[{"level":3,"title":"The default download method used","slug":"the-default-download-method-used","link":"#the-default-download-method-used","children":[]}]}],"git":{"createdTime":1662556125000,"updatedTime":1745426363000,"contributors":[{"name":"Noah Hsu","username":"Noah Hsu","email":"i@nn.ci","commits":8,"url":"https://github.com/Noah Hsu"},{"name":"sheltonzhu","username":"sheltonzhu","email":"498220739@qq.com","commits":1,"url":"https://github.com/sheltonzhu"},{"name":"安稳","username":"安稳","email":"56105412+anwen-anyi@users.noreply.github.com","commits":7,"url":"https://github.com/安稳"},{"name":"Wuxuan","username":"Wuxuan","email":"git@wangwuxuan.cn","commits":1,"url":"https://github.com/Wuxuan"},{"name":"Andy Hsu","username":"Andy Hsu","email":"i@nn.ci","commits":3,"url":"https://github.com/Andy Hsu"},{"name":"Patrick-Ze","username":"Patrick-Ze","email":"19711799+Patrick-Ze@users.noreply.github.com","commits":1,"url":"https://github.com/Patrick-Ze"},{"name":"安稳","username":"安稳","email":"anwen_anyi@foxmail.com","commits":4,"url":"https://github.com/安稳"},{"name":"huyixi","username":"huyixi","email":"ihuyixi@gmail.com","commits":1,"url":"https://github.com/huyixi"},{"name":"anwen","username":"anwen","email":"anwen_anyi@foxmail.com","commits":1,"url":"https://github.com/anwen"}]},"readingTime":{"minutes":2.09,"words":627},"filePathRelative":"guide/drivers/aliyundrive.md","localizedDate":"September 7, 2022"}');export{H as comp,Q as data};
